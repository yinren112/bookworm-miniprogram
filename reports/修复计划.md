# 生产环境就绪修复计划

## 本次执行任务
- [x] 重置 Prisma 开发库并清理 drift
- [x] 生成 `add_starred_items` 迁移
- [x] 运行 lint 并确认 0 errors
- [x] 运行星标集成测试
- [x] 运行单元测试
- [x] 确认无引用后删除分包首页

## P0 必须清零
- [x] 移除复习热力图的随机数据（当前无真实接口，先隐藏模块）
- [x] 卡片复习“下次复习”提示改用后端 `nextDueAt`
- [x] 生产环境禁止执行 `prisma/seed.ts`
- [ ] 确认并导入正式课程包数据（需运维提供数据文件）
- [x] 清理调试日志与 ESLint 报错（cheatsheet/payment/review/home）

## P1 上线前确认
- [ ] 替换客服微信占位值（需提供真实客服号）
- [x] 个人中心昵称/头像取真实数据或隐藏
- [x] 生产环境禁止 Mock 登录（dummy AppId/Secret 直接报错）
- [x] 修正 envVersion 失败回落到 localhost 的逻辑
- [x] 周榜昵称无昵称时改为匿名显示
- [x] 星标收藏改为后端持久化（/study/star, /study/starred-items）
- [x] 预计学习时间使用后端 `estimatedMinutes`
- [x] 增加 `__usePrivacyCheck__: true`
- [x] 补全运行时依赖（mp-html）

## P2 需求澄清/可选优化
- [x] 刷题题目顺序随机洗牌（Won't Fix，保持现状）
- [x] 请求追踪 ID 含随机（Won't Fix，保持现状）
- [x] mp-html 内部随机处理重复图片 URL（Won't Fix，保持现状）
- [x] 复习主页与分包主页逻辑重复（已删除分包主页）
- [x] 废弃工具 `utils/error.js` 迁移或删除（确认保留）
- [ ] WXML 无障碍属性补充（Backlog）
