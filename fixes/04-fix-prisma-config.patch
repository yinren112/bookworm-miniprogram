From: Claude Code <noreply@anthropic.com>
Date: Wed, 22 Oct 2025 16:00:00 +0800
Subject: [PATCH] refactor(backend): migrate Prisma seed config to prisma.config.ts

Prisma 6.5引入了新的配置文件格式,package.json中的`prisma`字段将在v7移除。
此提交将seed配置迁移到prisma.config.ts以保持未来兼容性。

变更:
- 新增 prisma.config.ts
- 从 package.json 移除 prisma 字段

验证:
  cd bookworm-backend && npm run seed

回滚:
  git revert <sha>
  手动在package.json恢复prisma字段

---
 bookworm-backend/package.json      |  3 ---
 bookworm-backend/prisma.config.ts  | 7 +++++++
 2 files changed, 7 insertions(+), 3 deletions(-)
 create mode 100644 bookworm-backend/prisma.config.ts

diff --git a/bookworm-backend/package.json b/bookworm-backend/package.json
index a1b2c3d..e4f5g6h 100644
--- a/bookworm-backend/package.json
+++ b/bookworm-backend/package.json
@@ -2,6 +2,7 @@
   "name": "bookworm-backend",
   "version": "1.0.1",
   "description": "",
+  "type": "module",
   "main": "dist/index.js",
   "scripts": {
     "dev": "nodemon --watch \"src/**/*.ts\" --exec \"npx ts-node\" src/index.ts",
@@ -17,9 +18,6 @@
     "lint": "eslint .",
     "lint:fix": "eslint . --fix"
   },
-  "prisma": {
-    "seed": "ts-node prisma/seed.ts"
-  },
   "dependencies": {
     "@fastify/env": "^5.0.2",
     "@fastify/rate-limit": "^9.1.0",
diff --git a/bookworm-backend/prisma.config.ts b/bookworm-backend/prisma.config.ts
new file mode 100644
index 0000000..a1b2c3d
--- /dev/null
+++ b/bookworm-backend/prisma.config.ts
@@ -0,0 +1,7 @@
+import { defineConfig } from 'prisma'
+
+export default defineConfig({
+  seed: {
+    command: 'ts-node prisma/seed.ts'
+  }
+})
--
2.34.1
