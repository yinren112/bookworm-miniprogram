# QA Checklist（小程序上线前）

## 1. 覆盖机型与账号
- **设备**：iOS（≥15.x），Android（≥12），微信版本保持最新稳定版。
- **账号**：至少 2 个普通用户 + 1 个 STAFF 账号；包含已绑手机号与未绑手机号两类。
- **网络**：Wi-Fi & 4G/5G；弱网（限速 512kbps）抽样。
- **截图存储**：统一放置在内网共享盘或 wiki，按「日期/场景/账号」命名。

## 2. 核心用例（需截图或录屏）
- 注册/登录：微信授权、手机号绑定/合并提示。
- 市场浏览：列表、搜索、筛选、详情页加载与缓存刷新。
- 下单与支付：创建订单 → 微信支付拉起（含过期提示），支付成功后订单状态切换。
- 取货与核销：扫描/输入取货码，库存状态同步。
- 取消与退款：待支付取消、已支付退款申请（若有），确认提示与状态恢复。
- 卖书流程：STAFF 扫码收书、批量收购、库存入库校验。
- 内容页：`/pages/webview/index?slug=terms-of-service|privacy-policy` 打开正常。
- 客服入口：复制微信号、跳转客服/帮助页面。

## 3. 边界与异常
- 订单并发：同一用户重复下单应提示“已有待支付订单”。
- 支付重放：支付成功后重复回调不应重复扣减/改状态（需后台日志截图）。
- 弱网/断网：列表与订单页缓存降级可用，错误提示友好。
- 权限控制：STAFF 菜单仅在 STAFF 角色显示，普通用户不可访问。

## 4. 数据验证
- 数据库：订单状态、库存状态（IN_STOCK/RESERVED/SOLD）、payment_record 与 webhook_event 一致。
- 日志/指标：`/metrics`（支付/订单失败率），关键操作有脱敏日志。

## 5. 回归结果记录
- 表格字段：用例编号、描述、设备/账号、结果（Pass/Fail/Block）、问题链接、截图链接、备注。
- 若存在 Blocker，需给出复测试件与期望修复时间。
