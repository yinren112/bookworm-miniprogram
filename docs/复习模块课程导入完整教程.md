# å¤ä¹ æ¨¡å—è¯¾ç¨‹å¯¼å…¥å®Œæ•´æ•™ç¨‹

> **ç‰ˆæœ¬**: v1.0  
> **æœ€åæ›´æ–°**: 2026-01-21  
> **é€‚ç”¨å¯¹è±¡**: è¿è¥äººå‘˜ã€å¼€å‘äººå‘˜ã€ä»»ä½•éœ€è¦å¯¼å…¥æ–°è¯¾ç¨‹çš„äºº  
> **éš¾åº¦ç­‰çº§**: ğŸµ çŒ´å­éƒ½èƒ½çœ‹æ‡‚

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰](#1-å¿«é€Ÿå¼€å§‹5åˆ†é’Ÿä¸Šæ‰‹)
2. [è¯¾ç¨‹åŒ…ç»“æ„è¯¦è§£](#2-è¯¾ç¨‹åŒ…ç»“æ„è¯¦è§£)
3. [æ–‡ä»¶æ ¼å¼å®Œæ•´è§„èŒƒ](#3-æ–‡ä»¶æ ¼å¼å®Œæ•´è§„èŒƒ)
4. [å¯¼å…¥å·¥å…·ä½¿ç”¨æŒ‡å—](#4-å¯¼å…¥å·¥å…·ä½¿ç”¨æŒ‡å—)
5. [å®Œæ•´æ“ä½œæµç¨‹ï¼ˆå›¾æ–‡è¯¦è§£ï¼‰](#5-å®Œæ•´æ“ä½œæµç¨‹å›¾æ–‡è¯¦è§£)
6. [å¸¸è§é—®é¢˜ Q&A](#6-å¸¸è§é—®é¢˜-qa)
7. [é”™è¯¯æ’æŸ¥æ‰‹å†Œ](#7-é”™è¯¯æ’æŸ¥æ‰‹å†Œ)
8. [æœ€ä½³å®è·µä¸å»ºè®®](#8-æœ€ä½³å®è·µä¸å»ºè®®)

---

## 1. å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰

### 1.1 ä½ éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ

| å‡†å¤‡é¡¹ | è¯´æ˜ | å¦‚ä½•è·å– |
|--------|------|----------|
| âœ… Node.js | ç‰ˆæœ¬ 18 åŠä»¥ä¸Š | [nodejs.org](https://nodejs.org) ä¸‹è½½å®‰è£… |
| âœ… ç®¡ç†å‘˜ Token | ç”¨äºè°ƒç”¨å¯¼å…¥ API | ä»åå°è·å–ï¼ˆè§ä¸‹æ–¹è¯´æ˜ï¼‰ |
| âœ… è¯¾ç¨‹å†…å®¹æ–‡ä»¶ | manifest.jsonã€units.jsonã€TSVã€GIFT æ–‡ä»¶ | è‡ªå·±å‡†å¤‡æˆ–ä»æ¨¡æ¿å¤åˆ¶ |

### 1.2 æœ€ç®€å•çš„å¯¼å…¥æµç¨‹

```
ç¬¬1æ­¥ï¼šå‡†å¤‡è¯¾ç¨‹æ–‡ä»¶å¤¹
       â†“
ç¬¬2æ­¥ï¼šè·å–ç®¡ç†å‘˜ Token
       â†“
ç¬¬3æ­¥ï¼šè¿è¡Œä¸€è¡Œå‘½ä»¤
       â†“
ç¬¬4æ­¥ï¼šå®Œæˆï¼å»å°ç¨‹åºæŸ¥çœ‹
```

### 1.3 ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­

å‡è®¾ä½ è¦å¯¼å…¥ä¸€é—¨å«"é«˜ç­‰æ•°å­¦"çš„è¯¾ç¨‹ï¼š

```bash
# ç¬¬1æ­¥ï¼šè¿›å…¥åç«¯è„šæœ¬ç›®å½•
cd bookworm-backend/scripts

# ç¬¬2æ­¥ï¼šè®¾ç½® Tokenï¼ˆæ›¿æ¢æˆä½ è‡ªå·±çš„ï¼‰
$env:BOOKWORM_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# ç¬¬3æ­¥ï¼šå¯¼å…¥è¯¾ç¨‹ï¼ˆå…ˆç”¨ --dry-run æµ‹è¯•ï¼‰
node import_course_client.js --dry-run ../../courses/MA101

# ç¬¬4æ­¥ï¼šç¡®è®¤æ²¡é—®é¢˜åï¼Œæ­£å¼å¯¼å…¥å¹¶å‘å¸ƒ
node import_course_client.js --force --publish ../../courses/MA101
```

**å°±è¿™ä¹ˆç®€å•ï¼** å¦‚æœä½ åªæ˜¯æƒ³å¿«é€Ÿå¯¼å…¥ï¼Œä¸Šé¢å°±å¤Ÿäº†ã€‚ä¸‹é¢æ˜¯è¯¦ç»†è¯´æ˜ã€‚

---

## 2. è¯¾ç¨‹åŒ…ç»“æ„è¯¦è§£

### 2.1 è¯¾ç¨‹æ–‡ä»¶å¤¹é•¿ä»€ä¹ˆæ ·ï¼Ÿ

æ¯é—¨è¯¾ç¨‹æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹åå°±æ˜¯è¯¾ç¨‹ä»£å·ã€‚ä¾‹å¦‚ï¼š

```
MA101/                          â† è¯¾ç¨‹æ–‡ä»¶å¤¹ï¼ˆè¯¾ç¨‹ä»£å·ï¼‰
â”‚
â”œâ”€â”€ manifest.json               â† ã€å¿…éœ€ã€‘è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯
â”œâ”€â”€ units.json                  â† ã€å¿…éœ€ã€‘ç« èŠ‚åˆ—è¡¨
â”œâ”€â”€ cheatsheets.json            â† ã€å¯é€‰ã€‘æ€¥æ•‘åŒ…/èµ„æ–™åŒ…
â”‚
â”œâ”€â”€ cards/                      â† ã€å¯é€‰ã€‘é—ªå¡æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ limit.tsv               â† ç¬¬ä¸€ç« çš„é—ªå¡
â”‚   â”œâ”€â”€ derivative.tsv          â† ç¬¬äºŒç« çš„é—ªå¡
â”‚   â””â”€â”€ integral.tsv            â† ç¬¬ä¸‰ç« çš„é—ªå¡
â”‚
â””â”€â”€ questions/                  â† ã€å¯é€‰ã€‘é¢˜ç›®æ–‡ä»¶å¤¹
    â”œâ”€â”€ limit.gift              â† ç¬¬ä¸€ç« çš„é¢˜ç›®
    â”œâ”€â”€ derivative.gift         â† ç¬¬äºŒç« çš„é¢˜ç›®
    â””â”€â”€ integral.gift           â† ç¬¬ä¸‰ç« çš„é¢˜ç›®
```

### 2.2 æ–‡ä»¶å‘½åè§„åˆ™

**ğŸ”´ éå¸¸é‡è¦ï¼**

- `cards/` å’Œ `questions/` ä¸‹çš„æ–‡ä»¶å **å¿…é¡»** å’Œ `units.json` ä¸­çš„ `unitKey` ä¸€è‡´
- ä¾‹å¦‚ï¼š`units.json` å®šä¹‰äº† `"unitKey": "limit"`ï¼Œé‚£ cards æ–‡ä»¶å¿…é¡»å« `limit.tsv`ï¼Œquestions æ–‡ä»¶å¿…é¡»å« `limit.gift`

**æ­£ç¡®ç¤ºä¾‹ï¼š**
```
units.json ä¸­å®šä¹‰ï¼š{ "unitKey": "limit", "title": "ç¬¬ä¸€ç«  æé™" }
                            â†“
cards/limit.tsv  âœ… æ­£ç¡®
questions/limit.gift  âœ… æ­£ç¡®
```

**é”™è¯¯ç¤ºä¾‹ï¼š**
```
units.json ä¸­å®šä¹‰ï¼š{ "unitKey": "limit", "title": "ç¬¬ä¸€ç«  æé™" }
                            â†“
cards/ç¬¬ä¸€ç« .tsv  âŒ é”™è¯¯ï¼æ–‡ä»¶ååº”è¯¥ç”¨ unitKeyï¼Œä¸æ˜¯ title
cards/Limit.tsv   âŒ é”™è¯¯ï¼å¤§å°å†™æ•æ„Ÿï¼Œå¿…é¡»å®Œå…¨ä¸€è‡´
```

---

## 3. æ–‡ä»¶æ ¼å¼å®Œæ•´è§„èŒƒ

### 3.1 manifest.jsonï¼ˆè¯¾ç¨‹å…ƒæ•°æ®ï¼‰

è¿™æ˜¯è¯¾ç¨‹çš„"èº«ä»½è¯"ï¼Œå‘Šè¯‰ç³»ç»Ÿè¿™é—¨è¯¾å«ä»€ä¹ˆåå­—ã€‚

**æ ¼å¼ï¼š**
```json
{
  "courseKey": "MA101",
  "title": "é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰",
  "description": "å¤§å­¦ä¸€å¹´çº§é«˜ç­‰æ•°å­¦æ ¸å¿ƒå†…å®¹ï¼Œæ¶µç›–æé™ã€å¯¼æ•°ã€ç§¯åˆ†ç­‰åŸºç¡€çŸ¥è¯†ç‚¹ã€‚",
  "contentVersion": 1,
  "locale": "zh-CN"
}
```

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ | å¿…å¡« | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|------|
| `courseKey` | âœ… æ˜¯ | å­—ç¬¦ä¸² | è¯¾ç¨‹å”¯ä¸€æ ‡è¯†ï¼Œå»ºè®®å¤§å†™è‹±æ–‡+æ•°å­— | `"MA101"`, `"CS201"` |
| `title` | âœ… æ˜¯ | å­—ç¬¦ä¸² | æ˜¾ç¤ºç»™ç”¨æˆ·çš„è¯¾ç¨‹åç§° | `"é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰"` |
| `description` | âŒ å¦ | å­—ç¬¦ä¸² | è¯¾ç¨‹ç®€ä»‹ï¼ˆæœ€å¤š2000å­—ï¼‰ | `"è¿™æ˜¯ä¸€é—¨..."` |
| `contentVersion` | âœ… æ˜¯ | æ•°å­— | ç‰ˆæœ¬å·ï¼Œå¿…é¡»æ˜¯æ­£æ•´æ•° | `1`, `2`, `3` |
| `locale` | âŒ å¦ | å­—ç¬¦ä¸² | è¯­è¨€ä»£ç ï¼Œé»˜è®¤ `zh-CN` | `"zh-CN"`, `"en-US"` |

**âš ï¸ æ³¨æ„äº‹é¡¹ï¼š**

1. `courseKey` ä¸€æ—¦ç¡®å®šå°±ä¸è¦æ”¹ï¼Œå¦åˆ™ä¼šåˆ›å»ºæ–°è¯¾ç¨‹
2. æ¯æ¬¡æ›´æ–°å†…å®¹ï¼ŒæŠŠ `contentVersion` +1
3. ä¸åŒç‰ˆæœ¬å¯ä»¥å…±å­˜ï¼Œä½†ç”¨æˆ·åªçœ‹åˆ°å·²å‘å¸ƒçš„ç‰ˆæœ¬

---

### 3.2 units.jsonï¼ˆç« èŠ‚å®šä¹‰ï¼‰

å‘Šè¯‰ç³»ç»Ÿè¿™é—¨è¯¾æœ‰å“ªäº›ç« èŠ‚ã€‚

**æ ¼å¼ï¼š**
```json
[
  { "unitKey": "limit", "title": "ç¬¬ä¸€ç«  æé™", "orderIndex": 1 },
  { "unitKey": "derivative", "title": "ç¬¬äºŒç«  å¯¼æ•°ä¸å¾®åˆ†", "orderIndex": 2 },
  { "unitKey": "integral", "title": "ç¬¬ä¸‰ç«  ç§¯åˆ†", "orderIndex": 3 }
]
```

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ | å¿…å¡« | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|------|
| `unitKey` | âœ… æ˜¯ | å­—ç¬¦ä¸² | ç« èŠ‚å”¯ä¸€æ ‡è¯†ï¼Œç”¨è‹±æ–‡ | `"limit"`, `"chapter1"` |
| `title` | âœ… æ˜¯ | å­—ç¬¦ä¸² | æ˜¾ç¤ºç»™ç”¨æˆ·çš„ç« èŠ‚åç§° | `"ç¬¬ä¸€ç«  æé™"` |
| `orderIndex` | âŒ å¦ | æ•°å­— | æ’åºé¡ºåºï¼ˆè¶Šå°è¶Šé å‰ï¼‰ | `1`, `2`, `3` |

**âš ï¸ unitKey å‘½åå»ºè®®ï¼š**

| âœ… æ¨è | âŒ ä¸æ¨è | åŸå›  |
|---------|----------|------|
| `limit` | `ç¬¬ä¸€ç« ` | ä¸­æ–‡ä½œä¸ºé”®å€¼å®¹æ˜“å‡ºé—®é¢˜ |
| `chapter1` | `Chapter 1` | é¿å…ç©ºæ ¼ |
| `unit_01` | `unit-01` | ä¸‹åˆ’çº¿æ¯”æ¨ªçº¿å®‰å…¨ |

---

### 3.3 cards/*.tsvï¼ˆé—ªå¡æ–‡ä»¶ï¼‰

é—ªå¡ç”¨ **TSV æ ¼å¼**ï¼ˆTab åˆ†éš”å€¼ï¼‰ï¼Œç±»ä¼¼ Excel ä½†æ›´ç®€å•ã€‚

**æ ¼å¼ç¤ºä¾‹ï¼š**
```
contentId	difficulty	front	back
MA101-limit-001	1	æé™çš„ $\varepsilon$-$\delta$ å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ	å¯¹äºä»»æ„ç»™å®šçš„ $\varepsilon > 0$ï¼Œæ€»å­˜åœ¨ $\delta > 0$ï¼Œä½¿å¾—å½“ $0 < |x - x_0| < \delta$ æ—¶ï¼Œæ’æœ‰ $|f(x) - A| < \varepsilon$ã€‚
MA101-limit-002	1	æé™å”¯ä¸€æ€§å®šç†å†…å®¹ï¼Ÿ	å¦‚æœæ•°åˆ— $\{x_n\}$ æ”¶æ•›ï¼Œé‚£ä¹ˆå®ƒçš„æé™æ˜¯å”¯ä¸€çš„ã€‚
MA101-limit-003	2	å¤¹é€¼å‡†åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ	è‹¥åœ¨æŸå»å¿ƒé‚»åŸŸå†… $g(x) \le f(x) \le h(x)$ï¼Œä¸” $\lim g(x) = \lim h(x) = A$ï¼Œåˆ™ $\lim f(x) = A$ã€‚
```

**âš ï¸ è¶…çº§é‡è¦ï¼šTSV æ–‡ä»¶æ€ä¹ˆåšï¼Ÿ**

**æ–¹æ³•1ï¼šç”¨ Excel åˆ¶ä½œ**
1. æ‰“å¼€ Excelï¼Œæ–°å»ºå·¥ä½œè¡¨
2. ç¬¬ä¸€è¡Œå¡«è¡¨å¤´ï¼š`contentId` `difficulty` `front` `back`
3. ä¸‹é¢å¡«å†…å®¹
4. ä¿å­˜æ—¶é€‰æ‹©"æ–‡æœ¬æ–‡ä»¶(åˆ¶è¡¨ç¬¦åˆ†éš”)(*.txt)"
5. æŠŠæ–‡ä»¶åç¼€åä» `.txt` æ”¹æˆ `.tsv`

**æ–¹æ³•2ï¼šç”¨è®°äº‹æœ¬/VS Code**
1. ç›´æ¥å¤åˆ¶ä¸Šé¢çš„æ ¼å¼
2. æ¯åˆ—ä¹‹é—´ç”¨ **Tab é”®** åˆ†éš”ï¼ˆä¸æ˜¯ç©ºæ ¼ï¼ï¼‰
3. ä¿å­˜ä¸º UTF-8 ç¼–ç 

**åˆ—è¯´æ˜ï¼š**

| åˆ—å | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `contentId` | âœ… æ˜¯ | å¡ç‰‡å”¯ä¸€IDï¼Œæ ¼å¼å»ºè®®ï¼šè¯¾ç¨‹-ç« èŠ‚-åºå· | `MA101-limit-001` |
| `front` | âœ… æ˜¯ | å¡ç‰‡æ­£é¢ï¼ˆé—®é¢˜ï¼‰ | `æé™çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ` |
| `back` | âœ… æ˜¯ | å¡ç‰‡èƒŒé¢ï¼ˆç­”æ¡ˆï¼‰ | `æé™æ˜¯æŒ‡...` |
| `tags` | âŒ å¦ | æ ‡ç­¾ï¼Œé€—å·åˆ†éš” | `é‡ç‚¹,å¿…è€ƒ` |
| `difficulty` | âŒ å¦ | éš¾åº¦ 1-5ï¼ˆé»˜è®¤1ï¼‰ | `1`, `3`, `5` |

**æ•°å­¦å…¬å¼æ€ä¹ˆå†™ï¼Ÿ**

æ”¯æŒ LaTeX æ ¼å¼ï¼š
- è¡Œå†…å…¬å¼ï¼š`$x^2 + y^2 = z^2$`
- å—çº§å…¬å¼ï¼š`$$\int_0^1 x^2 dx = \frac{1}{3}$$`

---

### 3.4 questions/*.giftï¼ˆé¢˜ç›®æ–‡ä»¶ï¼‰

é¢˜ç›®ç”¨ **GIFT æ ¼å¼**ï¼Œè¿™æ˜¯ä¸€ç§ç®€å•çš„é¢˜ç›®æ ‡è®°è¯­è¨€ã€‚

#### 3.4.1 å•é€‰é¢˜

```gift
::MA101-limit-Q001:: $\lim_{x \to 0} \frac{\sin x}{x}$ çš„å€¼æ˜¯ï¼Ÿ {
  =1
  ~0
  ~ä¸å­˜åœ¨
  ~$\infty$
}
```

**è§£é‡Šï¼š**
- `::MA101-limit-Q001::` â€” é¢˜ç›® ID
- `$\lim_{x \to 0}...$` â€” é¢˜å¹²ï¼ˆæ”¯æŒ LaTeXï¼‰
- `=1` â€” æ­£ç¡®ç­”æ¡ˆï¼ˆå‰é¢åŠ ç­‰å·ï¼‰
- `~0` â€” é”™è¯¯é€‰é¡¹ï¼ˆå‰é¢åŠ æ³¢æµªå·ï¼‰

#### 3.4.2 å¤šé€‰é¢˜

```gift
::MA101-limit-Q002:: ä»¥ä¸‹å“ªäº›æ˜¯æé™çš„æ€§è´¨ï¼Ÿ {
  =å”¯ä¸€æ€§
  =ä¿å·æ€§
  ~å¯é€†æ€§
  =æœ‰ç•Œæ€§
  ~å¯åŠ æ€§
}
```

**è§£é‡Šï¼š**
- å¤šä¸ª `=` å¼€å¤´è¡¨ç¤ºå¤šé€‰é¢˜
- ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­ä¸ºå¤šé€‰é¢˜

#### 3.4.3 åˆ¤æ–­é¢˜

```gift
// æ­£ç¡®çš„åˆ¤æ–­é¢˜
::MA101-limit-Q003:: å¦‚æœæ•°åˆ—æ”¶æ•›ï¼Œåˆ™å®ƒä¸€å®šæœ‰ç•Œã€‚ {T}

// é”™è¯¯çš„åˆ¤æ–­é¢˜
::MA101-limit-Q004:: æœ‰ç•Œæ•°åˆ—ä¸€å®šæ”¶æ•›ã€‚ {F}
```

**è§£é‡Šï¼š**
- `{T}` æˆ– `{TRUE}` â€” ç­”æ¡ˆæ˜¯"å¯¹"
- `{F}` æˆ– `{FALSE}` â€” ç­”æ¡ˆæ˜¯"é”™"

#### 3.4.4 å¡«ç©ºé¢˜

```gift
::MA101-limit-Q005:: é‡è¦æé™ $\lim_{x \to 0} \frac{\sin x}{x}$ = ____ {=1}

// å¤šä¸ªå¯æ¥å—ç­”æ¡ˆ
::MA101-limit-Q006:: $e$ çš„è¿‘ä¼¼å€¼æ˜¯ ____ {=2.718|2.72|2.7}
```

**è§£é‡Šï¼š**
- `{=ç­”æ¡ˆ}` â€” å¡«ç©ºé¢˜æ ¼å¼
- ç”¨ `|` åˆ†éš”å¤šä¸ªå¯æ¥å—ç­”æ¡ˆ

#### 3.4.5 æ³¨é‡Š

```gift
// è¿™æ˜¯æ³¨é‡Šï¼Œä¸ä¼šè¢«è§£æ
// å¯ä»¥ç”¨æ¥åˆ†éš”é¢˜ç›®æˆ–å†™å¤‡æ³¨

::Q001:: é¢˜ç›®å†…å®¹ { =ç­”æ¡ˆ }
```

---

### 3.5 cheatsheets.jsonï¼ˆæ€¥æ•‘åŒ…é…ç½®ï¼‰

å¯é€‰æ–‡ä»¶ï¼Œç”¨äºæ·»åŠ ã€Œæ€¥æ•‘åŒ…ï¼ˆCheatsheetsï¼‰ã€ï¼šè€ƒå‰å¿«é€Ÿå›é¡¾çš„**æåº¦é‡ç‚¹**èµ„æ–™å…¥å£ã€‚

æ€¥æ•‘åŒ…æ”¯æŒ 3 ç§å½¢æ€ï¼š
- `pdf`ï¼šå¤–é“¾ PDFï¼Œé€‚åˆæ–‡å­—å¤š/å¤šé¡µèµ„æ–™ï¼ˆå¹´è¡¨ã€èƒŒè¯µæ‰‹å†Œã€æ€ç»´å¯¼å›¾ï¼‰
- `image`ï¼šå¤–é“¾å›¾ç‰‡ï¼ˆJPG/PNGï¼‰ï¼Œé€‚åˆå…¬å¼è¡¨ã€åœ°å›¾ã€æµç¨‹å›¾
- `note`ï¼š**å†…ç½®å†…å®¹**ï¼ˆæ¨è Markdownï¼‰ï¼Œé€‚åˆâ€œä¸€å±ä¸€ä¸»é¢˜â€çš„å†²åˆºé€Ÿè®°ï¼ˆå’Œé¢˜åº“çš„çŸ¥è¯†ç‚¹é£æ ¼ä¸€è‡´ï¼Œæ‰“å¼€å³è¯»ï¼‰

#### 3.5.1 å¦‚ä½•åˆ¶ä½œæ€¥æ•‘åŒ…ï¼ˆæ¨èæµç¨‹ï¼‰

1) å…ˆé€‰é¢˜ï¼šåªæ”¾**æåº¦é‡ç‚¹/é«˜é¢‘å¿…è€ƒ**å†…å®¹ï¼Œé¿å…æŠŠâ€œå…¨é‡è®²ä¹‰â€å¡è¿›æ€¥æ•‘åŒ…  
2) å†³å®šå½¢æ€ï¼š
   - éœ€è¦æ’ç‰ˆ/å¤šé¡µï¼šç”¨ `pdf`
   - éœ€è¦ä¸€å¼ å›¾ç§’æ‡‚ï¼šç”¨ `image`
   - éœ€è¦åƒâ€œè€ƒç‚¹å¡ç‰‡â€ä¸€æ ·åœ¨çº¿è¯»ï¼šç”¨ `note`
3) å¦‚æœæ˜¯ `pdf/image`ï¼š
   - æŠŠæ–‡ä»¶ä¸Šä¼ åˆ° CDN/OSS/COSï¼Œæ‹¿åˆ° **https URL**
   - ç¡®ä¿è¯¥åŸŸåå·²åŠ å…¥å°ç¨‹åºâ€œä¸‹è½½/ä¸šåŠ¡åŸŸåâ€ç™½åå•ï¼ˆå¦åˆ™ `wx.downloadFile`/`wx.previewImage` ä¼šå¤±è´¥ï¼‰
4) å†™ `cheatsheets.json`ï¼š
   - æ•°ç»„é¡ºåº = å°ç¨‹åºé‡Œæ˜¾ç¤ºé¡ºåºï¼ˆè¶Šé‡è¦è¶Šé å‰ï¼‰
   - éœ€è¦å…³è”åˆ°æŸä¸€ç« å°±å†™ `unitKey`ï¼ˆå¿…é¡»ä¸ `units.json` é‡Œçš„ `unitKey` å®Œå…¨ä¸€è‡´ï¼‰

**æ ¼å¼ï¼š**
```json
[
  {
    "title": "æé™å…¬å¼é€ŸæŸ¥è¡¨",
    "assetType": "pdf",
    "url": "https://cdn.example.com/limit-cheatsheet.pdf",
    "unitKey": "limit",
    "version": 1
  },
  {
    "title": "å¯¼æ•°å…¬å¼å¤§å…¨",
    "assetType": "image",
    "url": "https://cdn.example.com/derivative-formulas.png"
  },
  {
    "title": "å¿…èƒŒè€ƒç‚¹ï¼ˆå†²åˆºï¼‰",
    "assetType": "note",
    "contentFormat": "markdown",
    "content": "# 5åˆ†é’Ÿé€Ÿè®°\n\n- åªæ”¾**æåº¦é‡ç‚¹**\n- ä¸€å±ä¸€ä¸»é¢˜\n- ç”¨çŸ­å¥ã€åˆ—è¡¨ã€å£è¯€\n",
    "unitKey": "limit",
    "version": 1
  }
]
```

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `title` | âœ… æ˜¯ | èµ„æ–™æ ‡é¢˜ |
| `assetType` | âœ… æ˜¯ | ç±»å‹ï¼š`"pdf"` / `"image"` / `"note"` |
| `url` | âš ï¸ å–å†³äºç±»å‹ | å¤–é“¾èµ„æº URLï¼ˆ`pdf`/`image` å¿…å¡«ï¼›`note` ä¸éœ€è¦ï¼‰ |
| `content` | âš ï¸ å–å†³äºç±»å‹ | å†…ç½®å†…å®¹ï¼ˆ`note` å¿…å¡«ï¼Œå»ºè®® Markdownï¼‰ |
| `contentFormat` | âŒ å¦ | `note` å†…å®¹æ ¼å¼ï¼Œå½“å‰æ”¯æŒï¼š`"markdown"`ï¼ˆé»˜è®¤ markdownï¼‰ |
| `unitKey` | âŒ å¦ | å…³è”çš„ç« èŠ‚ |
| `version` | âŒ å¦ | ç‰ˆæœ¬å·ï¼Œé»˜è®¤ 1 |

**âš ï¸ æ³¨æ„ï¼š**
- `pdf/image` çš„ `url` å¿…é¡»æ˜¯å…¬ç½‘å¯è®¿é—®çš„ **https** é“¾æ¥ï¼›ç³»ç»Ÿä¸ä¼šä¸Šä¼ æ–‡ä»¶ï¼Œåªä¿å­˜é“¾æ¥
- `note` ç”¨äºâ€œè€ƒå‰é€Ÿè®°â€ï¼Œå†…å®¹å»ºè®®ä¿æŒçŸ­å°ï¼šä¸€å±ä¸€ä¸»é¢˜ã€çŸ­å¥/åˆ—è¡¨/å£è¯€ï¼ˆæ›´é€‚åˆæ‰‹æœºä¸´è€ƒå¿«é€Ÿåˆ·ï¼‰
- å»ºè®®æŠŠåŒä¸€é—¨è¯¾çš„æ€¥æ•‘åŒ…æ§åˆ¶åœ¨å°‘é‡ï¼ˆä¾‹å¦‚ 5ï½20 æ¡ï¼‰ï¼Œå¦åˆ™ä¸´è€ƒæ£€ç´¢åè€Œå˜æ…¢

#### 3.5.2 noteï¼ˆå†…ç½®å†…å®¹ï¼‰ç¼–å†™å»ºè®®ï¼ˆMarkdownï¼‰

- æ ‡é¢˜ï¼šç”¨ `#` / `##` åˆ’åˆ†å±‚çº§
- åˆ—è¡¨ï¼šç”¨ `-` å†™è¦ç‚¹ï¼›æ¯æ¡å°½é‡ä¸è¶…è¿‡ä¸€è¡Œ
- å¼ºè°ƒï¼šç”¨ `**åŠ ç²—**` æ ‡æ³¨å…³é”®è¯ã€æ˜“æ··ç‚¹ã€å¿…è€ƒç‚¹
- ç»“æ„ï¼šæ¨èâ€œç»“è®º â†’ å…³é”®è¯ â†’ å¸¸è€ƒé—®æ³•/æ˜“é”™ç‚¹ â†’ å£è¯€â€

ç¤ºä¾‹ï¼ˆå»ºè®®ä¸€å±å°±èƒ½è¯»å®Œï¼‰ï¼š
```json
{
  "title": "å¿…èƒŒè€ƒç‚¹ï¼ˆå†²åˆºï¼‰",
  "assetType": "note",
  "contentFormat": "markdown",
  "content": "# 5åˆ†é’Ÿé€Ÿè®°\\n\\n- åªæ”¾**æåº¦é‡ç‚¹**\\n- ä¸€å±ä¸€ä¸»é¢˜\\n- ç”¨çŸ­å¥ã€åˆ—è¡¨ã€å£è¯€\\n",
  "unitKey": "limit",
  "version": 1
}
```

---

## 4. å¯¼å…¥å·¥å…·ä½¿ç”¨æŒ‡å—

### 4.1 å·¥å…·ä½ç½®

```
bookworm-backend/
â””â”€â”€ scripts/
    â””â”€â”€ import_course_client.js   â† å¯¼å…¥å·¥å…·å°±æ˜¯è¿™ä¸ªæ–‡ä»¶
```

### 4.2 å®‰è£…ä¾èµ–

ç¬¬ä¸€æ¬¡ä½¿ç”¨å‰ï¼Œéœ€è¦å®‰è£…ä¾èµ–ï¼š

```bash
cd bookworm-backend
npm install    # å¦‚æœæ²¡è£…è¿‡ä¾èµ–çš„è¯
```

### 4.3 å‘½ä»¤æ ¼å¼

```bash
node import_course_client.js [é€‰é¡¹] <è¯¾ç¨‹ç›®å½•è·¯å¾„>
```

### 4.4 æ‰€æœ‰é€‰é¡¹è¯´æ˜

| é€‰é¡¹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--token <token>` | ç®¡ç†å‘˜ JWT Token | `--token "eyJ..."` |
| `--api <url>` | API åœ°å€ï¼ˆé»˜è®¤ localhost:8080ï¼‰ | `--api "https://api.example.com"` |
| `--dry-run` | æµ‹è¯•æ¨¡å¼ï¼ŒåªéªŒè¯ä¸å¯¼å…¥ | `--dry-run` |
| `--force` | å¼ºåˆ¶è¦†ç›–ç°æœ‰å†…å®¹ | `--force` |
| `--publish` | å¯¼å…¥åç›´æ¥å‘å¸ƒ | `--publish` |

### 4.5 Token çš„ä¸¤ç§ä¼ å…¥æ–¹å¼

**æ–¹å¼1ï¼šå‘½ä»¤è¡Œå‚æ•°**
```bash
node import_course_client.js --token "eyJhbGci..." ./courses/MA101
```

**æ–¹å¼2ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰**
```bash
# Windows PowerShell
$env:BOOKWORM_TOKEN="eyJhbGci..."

# Linux/Mac
export BOOKWORM_TOKEN="eyJhbGci..."

# ç„¶åè¿è¡Œï¼ˆä¸éœ€è¦ --tokenï¼‰
node import_course_client.js ./courses/MA101
```

### 4.6 å¸¸ç”¨å‘½ä»¤ç»„åˆ

```bash
# 1. åªéªŒè¯ï¼Œä¸å®é™…å¯¼å…¥ï¼ˆå¼ºçƒˆæ¨èå…ˆè·‘è¿™ä¸ªï¼ï¼‰
node import_course_client.js --dry-run ./courses/MA101

# 2. é¦–æ¬¡å¯¼å…¥æ–°è¯¾ç¨‹
node import_course_client.js --publish ./courses/MA101

# 3. æ›´æ–°å·²æœ‰è¯¾ç¨‹ï¼ˆè¦†ç›–å†…å®¹ï¼‰
node import_course_client.js --force --publish ./courses/MA101

# 4. å¯¼å…¥ä½†ä¸å‘å¸ƒï¼ˆè‰ç¨¿çŠ¶æ€ï¼‰
node import_course_client.js --force ./courses/MA101

# 5. å¯¼å…¥åˆ°è¿œç¨‹æœåŠ¡å™¨
node import_course_client.js --api "https://api.yourserver.com" --publish ./courses/MA101
```

---

## 5. å®Œæ•´æ“ä½œæµç¨‹ï¼ˆå›¾æ–‡è¯¦è§£ï¼‰

### 5.1 ç¬¬ä¸€æ­¥ï¼šè·å–ç®¡ç†å‘˜ Token

**æ–¹æ³•Aï¼šä»æµè§ˆå™¨å¼€å‘è€…å·¥å…·è·å–**

1. æ‰“å¼€åå°ç®¡ç†é¡µé¢å¹¶ç™»å½•
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ°ã€ŒNetworkã€ï¼ˆç½‘ç»œï¼‰æ ‡ç­¾
4. åˆ·æ–°é¡µé¢æˆ–åšä»»æ„æ“ä½œ
5. ç‚¹å‡»ä»»æ„ä¸€ä¸ª API è¯·æ±‚
6. åœ¨ã€ŒHeadersã€é‡Œæ‰¾åˆ° `Authorization: Bearer eyJ...`
7. å¤åˆ¶ `eyJ...` è¿™éƒ¨åˆ†ï¼ˆä¸åŒ…æ‹¬ `Bearer ` å‰ç¼€ï¼‰

**æ–¹æ³•Bï¼šé€šè¿‡å¾®ä¿¡ç™»å½•æ¥å£è·å–**

å¦‚æœä½ æœ‰å¾®ä¿¡ç™»å½• codeï¼š
```bash
curl -X POST https://your-api.com/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"code": "å¾®ä¿¡ç™»å½•code"}'
```

è¿”å›çš„ JSON é‡Œæœ‰ `token` å­—æ®µã€‚

### 5.2 ç¬¬äºŒæ­¥ï¼šå‡†å¤‡è¯¾ç¨‹æ–‡ä»¶

**ä»æ¨¡æ¿å¤åˆ¶ï¼ˆæ¨èæ–°æ‰‹ï¼‰**

```bash
# å¤åˆ¶ç¤ºä¾‹è¯¾ç¨‹
cp -r docs/course-template ./courses/MY101

# æˆ–è€… Windows
xcopy docs\course-template courses\MY101\ /E
```

**æˆ–è€…ä»å¤´åˆ›å»º**

1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼š`mkdir courses/MY101`
2. åˆ›å»º `manifest.json`
3. åˆ›å»º `units.json`
4. åˆ›å»º `cards/` æ–‡ä»¶å¤¹å’Œ `.tsv` æ–‡ä»¶
5. åˆ›å»º `questions/` æ–‡ä»¶å¤¹å’Œ `.gift` æ–‡ä»¶

### 5.3 ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ–‡ä»¶æ ¼å¼

è¿è¡Œ dry-run æ£€æŸ¥ï¼š

```bash
cd bookworm-backend/scripts
node import_course_client.js --dry-run ../../courses/MY101
```

**æˆåŠŸè¾“å‡ºï¼š**
```
ğŸ“¦ Packaging course from: C:\...\courses\MY101
ğŸ”§ Mode: DRY RUN
ğŸ“š Found 3 units, 25 cards, 30 questions
ğŸš€ Uploading to http://localhost:8080...

âœ… IMPORT SUCCESSFUL
Course ID: null
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index)             â”‚ Value â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ unitsCreated        â”‚ 0     â”‚
â”‚ unitsUpdated        â”‚ 0     â”‚
â”‚ cardsCreated        â”‚ 0     â”‚
â”‚ ...                 â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸ Warnings:
 - Dry run mode: validation passed, no changes will be made
```

**å¤±è´¥è¾“å‡ºç¤ºä¾‹ï¼š**
```
âŒ IMPORT FAILED (Logic Application Error):
 - cards/limit/MA101-limit-001: Unbalanced LaTeX delimiters ($$) in 'front'
 - questions/derivative: Unit not defined in units list
```

### 5.4 ç¬¬å››æ­¥ï¼šæ­£å¼å¯¼å…¥

éªŒè¯é€šè¿‡åï¼Œæ‰§è¡Œæ­£å¼å¯¼å…¥ï¼š

```bash
node import_course_client.js --force --publish ../../courses/MY101
```

**æˆåŠŸè¾“å‡ºï¼š**
```
ğŸ“¦ Packaging course from: C:\...\courses\MY101
ğŸ”§ Mode: LIVE IMPORT
ğŸ“š Found 3 units, 25 cards, 30 questions
ğŸš€ Uploading to http://localhost:8080...

âœ… IMPORT SUCCESSFUL
Course ID: 5
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index)             â”‚ Value â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ unitsCreated        â”‚ 3     â”‚
â”‚ unitsUpdated        â”‚ 0     â”‚
â”‚ cardsCreated        â”‚ 25    â”‚
â”‚ cardsUpdated        â”‚ 0     â”‚
â”‚ questionsCreated    â”‚ 30    â”‚
â”‚ questionsUpdated    â”‚ 0     â”‚
â”‚ cheatsheetsCreated  â”‚ 0     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 ç¬¬äº”æ­¥ï¼šéªŒè¯å¯¼å…¥ç»“æœ

**æ–¹æ³•Aï¼šå°ç¨‹åºä¸­æŸ¥çœ‹**
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. ç¼–è¯‘å°ç¨‹åº
3. è¿›å…¥å¤ä¹ æ¨¡å—
4. çœ‹çœ‹è¯¾ç¨‹åˆ—è¡¨æœ‰æ²¡æœ‰æ–°è¯¾ç¨‹

**æ–¹æ³•Bï¼šAPI æŸ¥è¯¢**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://your-api.com/api/study/courses
```

---

## 6. å¸¸è§é—®é¢˜ Q&A

### Q1: Token è¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿ

**A:** JWT Token æœ‰æœ‰æ•ˆæœŸï¼ˆé»˜è®¤7å¤©ï¼‰ã€‚è¿‡æœŸåéœ€è¦é‡æ–°è·å–ã€‚

**è§£å†³æ–¹æ³•ï¼š**
1. é‡æ–°ç™»å½•åå°
2. æŒ‰ç…§ 5.1 çš„æ–¹æ³•é‡æ–°è·å– Token

---

### Q2: æˆ‘æ›´æ–°äº†è¯¾ç¨‹å†…å®¹ï¼Œæ€ä¹ˆè®©å®ƒç”Ÿæ•ˆï¼Ÿ

**A:** åˆ†ä¸¤ç§æƒ…å†µï¼š

**æƒ…å†µ1ï¼šå°æ›´æ–°ï¼ˆä¿®æ”¹ç°æœ‰å¡ç‰‡/é¢˜ç›®å†…å®¹ï¼‰**
```bash
# ç”¨ --force è¦†ç›–
node import_course_client.js --force --publish ./courses/MA101
```

**æƒ…å†µ2ï¼šå¤§æ›´æ–°ï¼ˆæ”¹å˜ç‰ˆæœ¬å·ï¼Œä¿ç•™å†å²ï¼‰**
1. ä¿®æ”¹ `manifest.json` ä¸­çš„ `contentVersion`ï¼ˆæ¯”å¦‚ä» 1 æ”¹æˆ 2ï¼‰
2. æ­£å¸¸å¯¼å…¥ï¼š
```bash
node import_course_client.js --publish ./courses/MA101
```

---

### Q3: å¯¼å…¥æˆåŠŸäº†ä½†ç”¨æˆ·çœ‹ä¸åˆ°è¯¾ç¨‹ï¼Ÿ

**A:** æ£€æŸ¥è¯¾ç¨‹çŠ¶æ€æ˜¯å¦ä¸º `PUBLISHED`ã€‚

**å¯èƒ½åŸå› ï¼š**
1. å¯¼å…¥æ—¶æ²¡åŠ  `--publish` å‚æ•°ï¼Œè¯¾ç¨‹æ˜¯è‰ç¨¿çŠ¶æ€
2. è§£å†³ï¼šé‡æ–°å¯¼å…¥åŠ ä¸Š `--publish`ï¼Œæˆ–é€šè¿‡ API ä¿®æ”¹çŠ¶æ€

```bash
# æ–¹æ³•1ï¼šé‡æ–°å¯¼å…¥
node import_course_client.js --force --publish ./courses/MA101

# æ–¹æ³•2ï¼šä¿®æ”¹çŠ¶æ€ï¼ˆéœ€è¦è¯¾ç¨‹ IDï¼‰
curl -X PATCH "https://your-api.com/api/study/admin/courses/5/status" \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "PUBLISHED"}'
```

---

### Q4: æˆ‘çš„ LaTeX å…¬å¼æ˜¾ç¤ºä¸å‡ºæ¥ï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. **å…¬å¼æ ¼å¼å¯¹ä¸å¯¹ï¼Ÿ**
   - è¡Œå†…å…¬å¼ï¼š`$x^2$`ï¼ˆå•ä¸ªç¾å…ƒç¬¦å·ï¼‰
   - å—çº§å…¬å¼ï¼š`$$\int x dx$$`ï¼ˆåŒç¾å…ƒç¬¦å·ï¼‰

2. **ç¾å…ƒç¬¦å·æ˜¯å¦æˆå¯¹ï¼Ÿ**
   - é”™è¯¯ï¼š`$x^2` âŒ ï¼ˆç¼ºå°‘ç»“å°¾ï¼‰
   - æ­£ç¡®ï¼š`$x^2$` âœ…

3. **ç‰¹æ®Šå­—ç¬¦æ˜¯å¦è½¬ä¹‰ï¼Ÿ**
   - åœ¨ JSON ä¸­ï¼Œåæ–œæ è¦åŒå†™ï¼š`\\frac{1}{2}`
   - åœ¨ TSV/GIFT ä¸­ï¼Œå•åæ–œæ å³å¯ï¼š`\frac{1}{2}`

---

### Q5: å¤šé€‰é¢˜ç­”æ¡ˆæ€ä¹ˆå­˜çš„ï¼Ÿ

**A:** ä¸¤ç§æ ¼å¼éƒ½æ”¯æŒï¼š

**æ ¼å¼1ï¼šç«–çº¿åˆ†éš”**
```gift
::Q001:: é—®é¢˜ {
  =ç­”æ¡ˆA
  =ç­”æ¡ˆB
  ~é€‰é¡¹C
}
```
åç«¯å­˜å‚¨ä¸ºï¼š`"ç­”æ¡ˆA|ç­”æ¡ˆB"`

**æ ¼å¼2ï¼šJSON æ•°ç»„**ï¼ˆAPI ç›´æ¥è°ƒç”¨æ—¶ï¼‰
```json
"answer": "[\"ç­”æ¡ˆA\", \"ç­”æ¡ˆB\"]"
```

---

### Q6: æ€ä¹ˆåˆ é™¤å·²å¯¼å…¥çš„è¯¾ç¨‹ï¼Ÿ

**A:** ç›®å‰æ²¡æœ‰ä¸€é”®åˆ é™¤åŠŸèƒ½ã€‚éœ€è¦ï¼š

1. é€šè¿‡ API æŠŠè¯¾ç¨‹çŠ¶æ€æ”¹ä¸º `ARCHIVED`ï¼š
```bash
curl -X PATCH "https://your-api.com/api/study/admin/courses/5/status" \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "ARCHIVED"}'
```

2. å½’æ¡£åçš„è¯¾ç¨‹ä¸ä¼šæ˜¾ç¤ºç»™ç”¨æˆ·

---

### Q7: æˆ‘èƒ½å¯¼å…¥å¤šå¤§çš„è¯¾ç¨‹ï¼Ÿ

**A:** æ²¡æœ‰ç¡¬æ€§é™åˆ¶ï¼Œä½†å»ºè®®ï¼š

| æŒ‡æ ‡ | å»ºè®®å€¼ | å¤‡æ³¨ |
|------|--------|------|
| å•é—¨è¯¾ç¨‹ç« èŠ‚æ•° | â‰¤ 50 | å¤ªå¤šå½±å“åŠ è½½ |
| å•ç« èŠ‚å¡ç‰‡æ•° | â‰¤ 200 | è¶…è¿‡å»ºè®®æ‹†åˆ† |
| å•ç« èŠ‚é¢˜ç›®æ•° | â‰¤ 100 | è¶…è¿‡å»ºè®®æ‹†åˆ† |
| å•æ¬¡å¯¼å…¥æ€»å†…å®¹ | < 5MB JSON | è¶…è¿‡å¯èƒ½è¶…æ—¶ |

---

### Q8: å¯ä»¥æ‰¹é‡å¯¼å…¥å¤šä¸ªè¯¾ç¨‹å—ï¼Ÿ

**A:** å¯ä»¥å†™ä¸ªè„šæœ¬å¾ªç¯è°ƒç”¨ï¼š

```bash
# PowerShell
foreach ($course in Get-ChildItem ./courses -Directory) {
    Write-Host "Importing $($course.Name)..."
    node import_course_client.js --force --publish $course.FullName
}
```

---

### Q9: å¯¼å…¥åˆ°çº¿ä¸Šç¯å¢ƒæ€ä¹ˆæ“ä½œï¼Ÿ

**A:** åŠ ä¸Š `--api` å‚æ•°æŒ‡å®šçº¿ä¸Šåœ°å€ï¼š

```bash
node import_course_client.js \
  --api "https://api.production.com" \
  --publish \
  ./courses/MA101
```

**âš ï¸ æ³¨æ„ï¼š**
- ç¡®ä¿ Token æ˜¯çº¿ä¸Šç¯å¢ƒçš„
- å»ºè®®å…ˆç”¨ `--dry-run` æµ‹è¯•

---

### Q10: TSV æ–‡ä»¶ç”¨ Excel ç¼–è¾‘åå¯¼å…¥å¤±è´¥ï¼Ÿ

**A:** å¸¸è§åŸå› åŠè§£å†³æ–¹æ³•ï¼š

| é—®é¢˜ | åŸå›  | è§£å†³ |
|------|------|------|
| ä¹±ç  | ç¼–ç é—®é¢˜ | ä¿å­˜æ—¶é€‰æ‹© `UTF-8` ç¼–ç  |
| åˆ—é”™ä½ | å•å…ƒæ ¼å†…æœ‰ Tab | å»æ‰å•å…ƒæ ¼å†…çš„ Tab å­—ç¬¦ |
| æ ¼å¼é”™è¯¯ | ä¿å­˜ä¸º CSV è€Œé TSV | å¦å­˜ä¸ºã€Œæ–‡æœ¬æ–‡ä»¶(åˆ¶è¡¨ç¬¦åˆ†éš”)ã€ |

**æ¨èåšæ³•ï¼š**
ç”¨ VS Code æˆ–è®°äº‹æœ¬ç¼–è¾‘ TSVï¼Œç¡®ä¿åˆ—ä¹‹é—´æ˜¯çœŸæ­£çš„ Tab å­—ç¬¦ã€‚

---

## 7. é”™è¯¯æ’æŸ¥æ‰‹å†Œ

### 7.1 å¸¸è§é”™è¯¯ä»£ç 

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ³• |
|------|------|----------|
| `401 Unauthorized` | Token æ— æ•ˆæˆ–è¿‡æœŸ | é‡æ–°è·å– Token |
| `403 Forbidden` | è´¦å·æ²¡æœ‰ STAFF æƒé™ | è”ç³»ç®¡ç†å‘˜ææƒ |
| `Missing manifest.json` | è¯¾ç¨‹ç›®å½•ç»“æ„ä¸å¯¹ | ç¡®è®¤ manifest.json å­˜åœ¨ |
| `Missing required columns` | TSV è¡¨å¤´ç¼ºå°‘å¿…éœ€åˆ— | æ£€æŸ¥æœ‰æ²¡æœ‰ contentId/front/back |
| `Unit not defined` | GIFT/TSV æ–‡ä»¶åå’Œ unitKey ä¸åŒ¹é… | ä¿®æ”¹æ–‡ä»¶åæˆ– units.json |
| `Unbalanced LaTeX delimiters` | å…¬å¼ $$ ä¸æˆå¯¹ | æ£€æŸ¥å…¬å¼æ ¼å¼ |

### 7.2 é”™è¯¯æ—¥å¿—åœ¨å“ªé‡Œçœ‹ï¼Ÿ

**å‰ç«¯æ—¥å¿—ï¼š**
```
bookworm-backend/logs/server-errors.log
```

**å¦‚ä½•å¼€å¯è¯¦ç»†æ—¥å¿—ï¼š**
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
$env:LOG_LEVEL="debug"
npm run dev
```

### 7.3 ç½‘ç»œé—®é¢˜æ’æŸ¥

```bash
# æµ‹è¯• API æ˜¯å¦å¯è¾¾
curl https://your-api.com/api/health

# æµ‹è¯• Token æ˜¯å¦æœ‰æ•ˆ
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://your-api.com/api/users/me
```

---

## 8. æœ€ä½³å®è·µä¸å»ºè®®

### 8.1 æ–‡ä»¶ç»„ç»‡å»ºè®®

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ courses/                    â† æ‰€æœ‰è¯¾ç¨‹æ”¾è¿™é‡Œ
â”‚   â”œâ”€â”€ MA101/
â”‚   â”œâ”€â”€ MA102/
â”‚   â””â”€â”€ CS101/
â””â”€â”€ course-templates/           â† æ¨¡æ¿ï¼Œå¤åˆ¶ä½¿ç”¨
    â””â”€â”€ standard-template/
```

### 8.2 å†…å®¹ç¼–å†™å»ºè®®

**é—ªå¡ï¼š**
- æ¯å¼ å¡ç‰‡åªè€ƒæŸ¥ä¸€ä¸ªçŸ¥è¯†ç‚¹
- æ­£é¢ç®€æ´æ˜äº†ï¼ŒèƒŒé¢è¯¦ç»†è§£é‡Š
- éš¾åº¦ä» 1 åˆ° 5 é€æ­¥é€’å¢

**é¢˜ç›®ï¼š**
- å•é€‰é¢˜é€‰é¡¹ 4 ä¸ªä¸ºå®œ
- é¿å…"ä»¥ä¸Šéƒ½å¯¹/éƒ½é”™"é€‰é¡¹
- æ¯é“é¢˜é…è§£æï¼ˆexplanationï¼‰

### 8.3 ç‰ˆæœ¬ç®¡ç†å»ºè®®

```
v1.0 â†’ åˆæ¬¡å‘å¸ƒ
v1.1 â†’ ä¿®å¤é”™åˆ«å­—ã€ç­”æ¡ˆé”™è¯¯
v2.0 â†’ æ–°å¢ç« èŠ‚æˆ–å¤§æ”¹å†…å®¹
```

### 8.4 å®‰å…¨å»ºè®®

1. **Token ä¸è¦æäº¤åˆ° Git**
   ```bash
   # .gitignore
   .env
   *.token
   ```

2. **çº¿ä¸Šç¯å¢ƒç”¨ç¯å¢ƒå˜é‡**
   ```bash
   # ä¸è¦å†™åœ¨å‘½ä»¤é‡Œï¼
   BOOKWORM_TOKEN=xxx node import_course_client.js ...
   ```

3. **å®šæœŸæ›´æ¢ Token**

### 8.5 å¤‡ä»½å»ºè®®

å¯¼å…¥å‰å¤‡ä»½ï¼š
```bash
# å¯¼å‡ºå½“å‰è¯¾ç¨‹æ•°æ®
pg_dump -t study_course -t study_unit -t study_card -t study_question > backup.sql
```

---

## é™„å½•Aï¼šå®Œæ•´è¯¾ç¨‹åŒ…ç¤ºä¾‹

### manifest.json
```json
{
  "courseKey": "MA101",
  "title": "é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰",
  "description": "å¤§å­¦ä¸€å¹´çº§é«˜ç­‰æ•°å­¦æ ¸å¿ƒå†…å®¹ï¼Œæ¶µç›–æé™ã€å¯¼æ•°ã€ç§¯åˆ†ç­‰åŸºç¡€çŸ¥è¯†ç‚¹ã€‚é€‚åˆå¤§ä¸€æ–°ç”ŸæœŸæœ«å¤ä¹ ä½¿ç”¨ã€‚",
  "contentVersion": 1,
  "locale": "zh-CN"
}
```

### units.json
```json
[
  { "unitKey": "limit", "title": "ç¬¬ä¸€ç«  æé™", "orderIndex": 1 },
  { "unitKey": "derivative", "title": "ç¬¬äºŒç«  å¯¼æ•°ä¸å¾®åˆ†", "orderIndex": 2 }
]
```

### cards/limit.tsv
```
contentId	difficulty	front	back
MA101-limit-001	1	æé™çš„ $\varepsilon$-$\delta$ å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ	å¯¹äºä»»æ„ç»™å®šçš„ $\varepsilon > 0$ï¼Œæ€»å­˜åœ¨ $\delta > 0$ï¼Œä½¿å¾—å½“ $0 < |x - x_0| < \delta$ æ—¶ï¼Œæ’æœ‰ $|f(x) - A| < \varepsilon$ã€‚
MA101-limit-002	1	æé™å”¯ä¸€æ€§å®šç†	å¦‚æœæ•°åˆ— $\{x_n\}$ æ”¶æ•›ï¼Œé‚£ä¹ˆå®ƒçš„æé™æ˜¯å”¯ä¸€çš„ã€‚
```

### questions/limit.gift
```gift
// å•é€‰é¢˜ç¤ºä¾‹
::MA101-limit-Q001:: $\lim_{x \to 0} \frac{\sin x}{x}$ çš„å€¼æ˜¯ï¼Ÿ {
  =1
  ~0
  ~ä¸å­˜åœ¨
  ~$\infty$
}

// åˆ¤æ–­é¢˜ç¤ºä¾‹
::MA101-limit-Q002:: è‹¥å‡½æ•°åœ¨æŸç‚¹è¿ç»­ï¼Œåˆ™è¯¥å‡½æ•°åœ¨è¯¥ç‚¹å¿…å¯å¯¼ã€‚ {F}

// å¡«ç©ºé¢˜ç¤ºä¾‹
::MA101-limit-Q003:: $\lim_{x \to \infty} \left(1 + \frac{1}{x}\right)^x$ = ____ {=e}
```

---

## é™„å½•Bï¼šå¿«é€Ÿæ£€æŸ¥æ¸…å•

å¼€å§‹å¯¼å…¥å‰ï¼Œè¿‡ä¸€éè¿™ä¸ªæ¸…å•ï¼š

- [ ] `manifest.json` å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- [ ] `units.json` å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- [ ] æ¯ä¸ª unit çš„ `unitKey` å”¯ä¸€
- [ ] `cards/` ç›®å½•ä¸‹çš„æ–‡ä»¶åå’Œ `unitKey` åŒ¹é…
- [ ] `questions/` ç›®å½•ä¸‹çš„æ–‡ä»¶åå’Œ `unitKey` åŒ¹é…
- [ ] TSV æ–‡ä»¶ç¬¬ä¸€è¡Œæ˜¯è¡¨å¤´
- [ ] TSV åˆ—ä¹‹é—´æ˜¯ Tab å­—ç¬¦ï¼ˆä¸æ˜¯ç©ºæ ¼ï¼‰
- [ ] GIFT æ–‡ä»¶ä¸­æ¯ä¸ªé¢˜ç›®æœ‰å”¯ä¸€ ID
- [ ] LaTeX å…¬å¼çš„ `$` å’Œ `$$` æˆå¯¹åŒ¹é…
- [ ] è·å–äº†æœ‰æ•ˆçš„ç®¡ç†å‘˜ Token
- [ ] è¿è¡Œäº† `--dry-run` éªŒè¯

---

**ğŸ‰ æ­å–œï¼ä½ å·²ç»æŒæ¡äº†è¯¾ç¨‹å¯¼å…¥çš„å…¨éƒ¨æŠ€èƒ½ï¼**

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹ `docs/COURSE_IMPORT_GUIDE.md` åŸå§‹æŠ€æœ¯æ–‡æ¡£ã€‚
