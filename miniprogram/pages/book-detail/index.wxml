<!-- pages/book-detail/index.wxml -->
<view class="container">
  <view wx:if="{{isLoading}}" class="loading-indicator">Loading...</view>
  <view wx:if="{{error}}" class="error-message">{{error}}</view>

  <view wx:if="{{bookDetail}}" class="detail-container">
    <image class="cover-image" src="{{bookDetail.booksku.cover_image_url || '/images/placeholder-cover.svg'}}" mode="aspectFit" />

    <view class="info-section">
      <text class="title">{{bookDetail.booksku.bookmaster.title}}</text>
      <text class="author">{{bookDetail.booksku.bookmaster.author}}</text>
      
      <view class="price-section">
        <text class="selling-price">¥{{bookDetail.selling_price}}</text>
        <text class="original-price" wx:if="{{bookDetail.booksku.bookmaster.original_price}}">¥{{bookDetail.booksku.bookmaster.original_price}}</text>
      </view>

      <view class="specs-card card">
        <view class="spec-item">
          <text class="spec-label">Edition</text>
          <text class="spec-value">{{bookDetail.booksku.edition || 'N/A'}}</text>
        </view>
        <view class="spec-item">
          <text class="spec-label">Condition</text>
          <text class="spec-value">{{bookDetail.condition}}</text>
        </view>
        <view class="spec-item">
          <text class="spec-label">ISBN</text>
          <text class="spec-value">{{bookDetail.booksku.bookmaster.isbn13}}</text>
        </view>
      </view>
    </view>
  </view>

  <view class="footer-bar" wx:if="{{bookDetail}}">
    <button class="buy-button" bindtap="handleBuyNow">立即购买</button>
  </view>
</view>