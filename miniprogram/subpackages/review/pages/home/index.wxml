<!-- subpackages/review/pages/home/index.wxml -->
<!-- å¤ä¹ é¦–é¡µ -->
<view class="container">
  <!-- å¤´éƒ¨é—®å€™ -->
  <view class="header-section">
    <text class="greeting-text">ä½ å¥½ï¼ŒåŒå­¦ ğŸ‘‹</text>
    <text class="greeting-sub">ä»Šå¤©ä¹Ÿè¦åšæŒå­¦ä¹ å“¦</text>
  </view>
  <!-- ä»Šæ—¥ä»»åŠ¡ Hero Card -->
  <view class="hero-card clay-card">
    <view class="hero-header">
      <view class="date-badge">
        <text class="date-text">{{todayDate}}</text>
      </view>
    </view>
    <view class="hero-content" wx:if="{{!loading && todaySummary}}">
      <view class="progress-ring-container">
        <!-- ç®€å•çš„åœ†å½¢è¿›åº¦å¯è§†åŒ–ï¼Œè¿™é‡Œç”¨CSSå®ç° -->
        <view class="progress-circle">
          <text class="progress-number">{{todaySummary.dueCards || 0}}</text>
          <text class="progress-label">å¾…å¤ä¹ </text>
        </view>
      </view>
      <view class="hero-stats">
        <view class="hero-stat-item">
          <text class="h-stat-num">{{todaySummary.newCards || 0}}</text>
          <text class="h-stat-label">æ–°å¡ç‰‡</text>
        </view>
        <view class="h-divider"></view>
        <view class="hero-stat-item">
          <text class="h-stat-num">{{todaySummary.reviewedToday || 0}}</text>
          <text class="h-stat-label">å·²å®Œæˆ</text>
        </view>
      </view>
    </view>
    <view class="hero-actions" wx:if="{{!loading && currentCourse}}">
      <button class="hero-btn primary" bindtap="startReview">
        <text>å¼€å§‹èƒŒå¡</text>
        <text class="icon">ğŸ“š</text>
      </button>
      <button class="hero-btn secondary" bindtap="startQuiz">
        <text>åˆ·é¢˜é—¯å…³</text>
        <text class="icon">ğŸ“</text>
      </button>
    </view>
    <view class="loading-state" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½æ•°æ®ä¸­...</text>
    </view>
  </view>
  <!-- è¿ç»­å­¦ä¹  -->
  <view class="streak-section clay-card" wx:if="{{!loading && streakInfo}}" bindtap="navigateToLeaderboard">
    <view class="streak-icon-wrapper">
      <text class="streak-emoji">{{streakInfo.isStudiedToday ? 'ğŸ”¥' : 'ğŸ§Š'}}</text>
    </view>
    <view class="streak-meta">
      <text class="streak-title">è¿ç»­å­¦ä¹  {{streakInfo.currentStreak}} å¤©</text>
      <text class="streak-sub">{{streakInfo.isStudiedToday ? 'ä¿æŒç«çƒ­çŠ¶æ€ï¼' : 'ä»Šå¤©è¿˜æ²¡å¼€å§‹å“¦'}}</text>
    </view>
    <view class="streak-arrow">
      <text>ğŸ† å‘¨æ¦œ</text>
    </view>
  </view>
  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-section">
    <text class="section-heading">æˆ‘çš„è¯¾ç¨‹</text>
    <view class="course-list" wx:if="{{!loading}}">
      <view class="course-card clay-card-sm" wx:for="{{courses}}" wx:key="id" bindtap="navigateToCourse" data-course-key="{{item.courseKey}}">
        <view class="course-icon-placeholder">{{item.title[0]}}</view>
        <view class="course-details">
          <text class="course-name">{{item.title}}</text>
          <view class="course-tags">
            <text class="mini-tag">{{item.totalCards || 0}} å¡ç‰‡</text>
          </view>
        </view>
        <view class="course-enter-btn">
          <text>è¿›å…¥</text>
        </view>
      </view>
      <view class="empty-state" wx:if="{{courses.length === 0}}">
        <text class="empty-text">è¿˜æ²¡æœ‰è¯¾ç¨‹ï¼Œå¿«å»æ¢ç´¢å§</text>
      </view>
    </view>
  </view>
</view>
